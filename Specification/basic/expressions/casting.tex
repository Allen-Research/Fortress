%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%   Copyright 2009, Oracle and/or its affiliates.
%   All rights reserved.
%
%
%   Use is subject to license terms.
%
%   This distribution may include materials developed by third parties.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Casting}
\seclabel{casting}

Although there is no ``casting'' operator (equivalent to casts in the
Java Programming Language) built into Fortress, the effect of a cast
can be provided by the following function:
\marginnote{I manually added space around the second $\Rightarrow$
-- Sukyoung}
%% cast[\T extends Any\](x: Any):T = 
%%   typecase x of
%%     T => x
%%     else => throw CastError
%%   end
\begin{Fortress}
\(\VAR{cast}\llbracket{}T \KWD{extends}\mskip 4mu plus 4mu\TYP{Any}\rrbracket(x\COLON \TYP{Any})\COLONOP{}T = \)\\
{\tt~~}\pushtabs\=\+\(  \KWD{typecase}\mskip 4mu plus 4mu{x} \KWD{of}\)\\
{\tt~~}\pushtabs\=\+\(    T \Rightarrow x\)\\
\(    \KWD{else} \Rightarrow\;\KWD{throw}\mskip 4mu plus 4mu\TYP{CastError}\)\-\\\poptabs
\(  \KWD{end}\)\-\\\poptabs
\end{Fortress}
The function converts the type of its argument to a given type.  If the
static type of the argument is not a subtype of the given type, a
\TYP{CastError} is thrown.
For convenience, the function \VAR{cast} is included in
\library.
